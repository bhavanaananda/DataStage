<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>

<head>
    <title>ADMIRAL: Datasets</title>

    <!-- TODO: move to separate CSS file -->
    <style>
    td {
        background-color: #FFE;
    }
    </style>

    <!-- Import jQuery framework -->
    <script type="text/javascript" src="../../jQuery/js/jquery-1.4.2.js"></script> 

    <!-- Import jQuery additional libraries -->
    <script type="text/javascript" src="../../jQuery/jquery.json-2.2.js"></script> 
 
    <!-- Import MochiKit modules: require MochiKit library functions to be fully qualified -->
    <script type="text/javascript">MochiKit = {__export__: false};</script>
    <script type="text/javascript" src="../../MochiKit/Base.js"></script>
    <script type="text/javascript" src="../../MochiKit/Iter.js"></script>
    <script type="text/javascript" src="../../MochiKit/Logging.js"></script>

    <!-- Import Admiral functions -->
    <script type="text/javascript" src="../../Admiral/admiral-base.js"></script>
    <script type="text/javascript" src="../../Admiral/Error.js"></script>
    <script type="text/javascript" src="../../Admiral/AsyncComputation.js"></script>
    <script type="text/javascript" src="../../SelectDataset/ListDatasets.js"></script>
    <script type="text/javascript" src="../../SelectDataset/GetDatasetsList.js"></script>
    <script type="text/javascript" src="../../SelectDataset/GetDatasetDetails.js"></script>
    <script type="text/javascript" src="../../SelectDataset/DisplayDatasetManifest.js"></script>
    
    <script>
    // Use jQuery via jQuery(...)
    jQuery.noConflict();
    </script>

    <!-- Execute the desired dataset listing logic -->
    <script>
	jQuery(document).ready( function ()
	{   var m = new admiral.AsyncComputation();
	    m.eval(function(val,callback)
	    {
	        admiral.listDatasets("","admiral-test", admiral.getDatasetList, callback);            
	    });
	    m.eval(function(val,callback)
	    {
	        // val supplies a <div> element containing a <table> to be displayed
	        jQuery("#tableDatasets").html("");
	        
	        //var dataSet = "/admiral-test/datasets/"+datasetName;
	        log.debug(val);
	        jQuery("#tableDatasets").append(val.find("table"));
	    });    
	    m.exec(null,admiral.noop);
	});
    </script>

</head>

<body>
   <h1>Datasets</h1>
   <div>   
	    <table id="tableDatasets" style="padding:2px">
		     <thead>
		         <tr>
		           <th> Dataset </th>
		           <th> Version number </th>
		           <th> Submitted on   </th>
		           <th> Submitted by   </th>
		        </tr>
		    </thead>
		    <tbody>
		        <tr>
		           <td><a href="somehost/somesilo/dataset/somedatasets1">somedataset1</a></td>
		           <td>nn</td>
		           <td>yyyy-mm-dd</td>
		           <td>submitter name </td>
		        </tr>
		        <tr>
		           <td><a href="somehost/somesilo/dataset/somedatasets2">somedataset2</a></td>
		           <td>nn</td>
		           <td>yyyy-mm-dd</td>
		           <td>submitter name </td>
		        </tr>
		     </tbody>
	      </table> 
   </div>   
</body>

</html>
