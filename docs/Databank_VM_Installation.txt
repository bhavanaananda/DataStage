Databank VM Setup--------------------------------------------------------------------------------Virtual machine detailsUbuntu 10.04.1 32 bit i386512MB RAM8GB Harddrive (all of hard disk not allocated at the time of creation)Network: NAT1 processorhostname: databankPartition disk Ð guided Ð use entire disk and set up LVMFull name: Databank Adminusername: databankadminpassword: Toot8gaeNO encryption of home dirNo proxyNo automatic updatesNo predefined softwareInstall Grub boot loader to master boot record--------------------------------------------------------------------------------Packages Installed     1  sudo apt-get install build-essential     2  sudo vim /etc/apt/sources.list           add  the following repository to the list         deb http://archive.canonical.com/ lucid partner      3  sudo apt-get update     4  sudo apt-get install openssh-server     5  sudo apt-get install sun-java6-jdk         Accept the licenses    6  sudo apt-get install python-dev    7  sudo apt-get install curl    8  sudo apt-get install links2    9  sudo apt-get install apache2   10  sudo apt-get install apache2-utils   11  sudo apt-get install python-setuptools   12  sudo easy_install pairtree==0.5.6-T   13  sudo easy_install pylons==0.9.7   14  sudo easy_install repoze.who==2.0a4   15  sudo easy_install rdflib==2.4.2   16  sudo easy_install rdfobject   17  sudo easy_install solrpy   18  sudo easy_install uuid   19  sudo rm -r /usr/local/lib/python2.6/dist-packages/rdflib-3.0.0-py2.6.egg/20 sudo apt-get install git-core21 sudo apt-get install unzip22 sudo apt-get install python-libxml223 sudo apt-get install python-libxslt1   24  sudo apt-get install libapache2-mod-wsgi   Installing VMWare tools   Select Install Vmware tools from the VMWare console    21  sudo mkdir /mnt/cdrom   22  sudo mount /dev/cdrom /mnt/cdrom   23  cd tmp   24  cd /tmp   25  ls -l   26  tar zxpf /mnt/cdrom/VMwareTools-7.7.6-203138.tar.gz vmware-tools-distrib/   27  ls -l   28  sudo umount /dev/cdrom   29  sudo apt-get install linux-headers-virtual   30  sudo apt-get install psmisc   31  cd vmware-tools-distrib/   32  sudo ./vmware-install.plAccept all of the default optionsInstalling Tomcat version 6   33  ls -l /usr/lib/jvm/java-6-sun   34  sudo vim /etc/profile         Add the following lines to profileCATALINA_HOME=/opt/tomcatJAVA_HOME=/usr/lib/jvm/java-6-sunexport CATALINA_HOMEexport JAVA_HOME   35  exit   36  echo $JAVA_HOME   37  echo $CATALINA_HOME   38  cd /tmp   39  wget http://www.mirrorservice.org/sites/ftp.apache.org/tomcat/tomcat-6/v6.0.32/bin/apache-tomcat-6.0.32.tar.gz   40  ls -l   41  tar xzvf apache-tomcat-6.0.32.tar.gz   42  ls -l   43  sudo mv apache-tomcat-6.0.32 /opt/tomcat   44  ls -l /opt/tomcat/   45  cd /opt/tomcat/bin/   Start tomcat and check the installation was fine   46  ./startup.sh   47  links2 http://localhost:8080   48  ./shutdown.shInstalling Solr   49  cd /tmp/   50  wget http://apache.favoritelinks.net//lucene/solr/1.4.1/apache-solr-1.4.1.tgz   51  ls -l   52  tar xzvf apache-solr-1.4.1.tgz   53  ls -l apache-solr-1.4.1/dist/   54  ls -l /opt/tomcat/webapps/   55  cp apache-solr-1.4.1/dist/apache-solr-1.4.1.war /opt/tomcat/webapps/solr.war   56  ls -l apache-solr-1.4.1/example/solr/   57  sudo cp -r apache-solr-1.4.1/example/solr/ /opt/solr   58  ls -l /opt/solr/   59  sudo chown -R databankadmin:databankadmin /opt/solr/   60  ls -l /opt/solr/   61  ls -l /opt/   62  vim /opt/tomcat/bin/catalina.sh         Modify catalina.sh to increase RAM and define the solr home directory.          Add the following line to the top of the file         CATALINA_OPTS="-Xmx512m -Dsolr.solr.home=/opt/solr"  63  cd /opt/tomcat/bin/  64  ./startup.sh  65 links2 http://localhost:8080/solrInstalling Redis (http://redis.io/)  66  cd /tmp  67  wget http://redis.googlecode.com/files/redis-1.2.6.tar.gz  68  ls -l  69  tar xzf redis-1.2.6.tar.gz  70  ls -l  72  sudo cp -r redis-1.2.6 /opt/redis  73  sudo chown -R databankadmin:databankadmin /opt/redis/  74  cd /opt/redis/  75  make  Run the redis server to see that it is working fine  76  ./redis-server   Install the python redis client (https://github.com/andymccurdy/redis-py)  77  sudo easy_install redis==1.34.1Install RecordSilo (pull from Github)  78  cd ~  79  mkdir git-src  80  cd git-src  81  git pull https://github.com/anusharanganathan/RecordSilo.git  82  git pull git://github.com/anusharanganathan/RecordSilo.g  83  git pull git://github.com/anusharanganathan/RecordSilo.git  84  git clone git://github.com/anusharanganathan/RecordSilo.git  85  cd RecordSilo/dist/  86  sudo easy_install RecordSilo-0.4.11-py2.6.eggCopy RDFDatabank (pull from Github)  145  cd /opt/  148  sudo git clone git://github.com/anusharanganathan/RDFDatabank.git  150  sudo chown -R databankadmin:databankadmin /opt/RDFDatabank/Create a password fileCreate a file 'passwd' in the root directory of the application using 'htpasswd' or similar:  151  cd RDFDatabank/  152  htpasswd -c passwd admin [enter admin password]Edit the production.ini fileIn the file production.ini, edit the granary root with the IP address / domain name of your databank instance. Also, change the solr endpoint (especially the port to 8080, if you used Tomcat)Edit the file users.pyEdit the file rdfdatabank/config/users.py. Add any users you wish to access or work with this application. This has a variable _USERS used by ./rdfdatabank/lib/ident_md.py which would best be replaced by a DB lookup or similar. For now, adjust it to suit your users. The important thing is the 'role'.Check the settings in who.iniEdit the dispatch.wsgi fileIn the mod_wsgi/dispatch.wsgi file, edit the location of your databank source in packages resources, cache dir and pylons application ini file (production.ini). The directory egg-cache is used by python to unpack egg filesEdit the apache file in sites-available. The location of dispatch.wsgi nneds to be edited as per your installationCreate a folder for the apache log files in /opt  175  cd /opt  176  sudo mkdir apachelog  177  sudo chown -R databankadmin:databankadmin /opt/apachelog/Copy the solr config files from docs into your solr conf  178  cp docs/solr_config/conf/schema.xml ../solr/conf/  179  cp docs/solr_config/conf/solrconfig.xml ../solr/conf/  180  cd tomcat/bin/  181  ./startup.shCopy the apache site to sites-available. Edit the site details (location of databank). Enable mod wsgi and the site databank_wsgi  201  sudo cp RDFDatabank/docs/apache_config/databank_wsgi /etc/apache2/sites-available/  202  ls -l /etc/apache2/sites-available/  203  ls -l /etc/apache2/sites-enabled/  204  a2dissite 000-default  181  sudo a2enmod mod_wsgi  205 sudo a2ensite databank_wsgiChange permission, so www-data has access   233  sudo chown -R databankadmin:www-data apachelog/  234  sudo chown -R databankadmin:www-data RDFDatabank/  235  sudo chown -R databankadmin:www-data solr/Start redis-server in a screenscreencd /opt/redis./redis-serverctrl-a ctrl-d (to detatch the screen)Restart apache  239  sudo /etc/init.d/apache2 restartTo test pylons and dump messages on the command line  sudo /etc/init.d/apache2 stopsudo paster serve development.ini (the url has to be 0.0.0.0 and port 80 in the ini file)